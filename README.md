# Mercy and courage

[Описание](#описание-) | [Логика работы приложения](#логика-работы-приложения) | [Пожертвования](#пожертвования) | [Пользователи и права доступа](#пользователи-и-права-доступа) | [Как начать](#Как-начать) | [Настройка](#Настройка) | [Команда для запуска проекта на локальном сервере](#команда-для-запуска-проекта-на-локальном-сервере) | [Фишечка с суперпользователем](#фишечка-с-суперпользователем) | [Лицензия](#лицензия) | [Контакты](#контакты)

## Описание 
Mercy and courage - Это приложение, созданное на фреймворке FastAPI, для возможного благотворительного фонда.
Фонд собирает пожертвования на различные целевые проекты: на медицинское обслуживание нуждающихся животных, на обустройство жилья, на корм оставшимся без попечения животным — на любые цели, связанные с поддержкой бедных питомцев.

## Логика работы приложения
В Фонде может быть открыто несколько целевых проектов. У каждого проекта есть название, описание и сумма, которую планируется собрать. После того, как нужная сумма собрана — проект закрывается.
Пожертвования в проекты поступают по принципу First In, First Out: все пожертвования идут в проект, открытый раньше других; когда этот проект набирает необходимую сумму и закрывается — пожертвования начинают поступать в следующий проект.

## Пожертвования
Каждый пользователь может сделать пожертвование и сопроводить его комментарием. Пожертвования не целевые: они вносятся в фонд, а не в конкретный проект. Каждое полученное пожертвование автоматически добавляется в первый открытый проект, который ещё не набрал нужную сумму. Если пожертвование больше нужной суммы или же в Фонде нет открытых проектов — оставшиеся деньги ждут открытия следующего проекта. При создании нового проекта все неинвестированные пожертвования автоматически вкладываются в новый проект.

## Пользователи и права доступа
Целевые проекты создаются администраторами сайта. 
Любой пользователь может видеть список всех проектов, включая требуемые и уже внесенные суммы. Это касается всех проектов — и открытых, и закрытых.
Зарегистрированные пользователи могут отправлять пожертвования и просматривать список своих пожертвований.

Права пользователей
Любой посетитель сайта (в том числе неавторизованный) может посмотреть список всех проектов.
Суперпользователь может: 
создавать проекты,
удалять проекты, в которые не было внесено средств,
изменять название и описание существующего проекта, устанавливать для него новую требуемую сумму (но не меньше уже внесённой).
Никто не может менять через API размер внесённых средств, удалять или модифицировать закрытые проекты, изменять даты создания и закрытия проектов.

Любой зарегистрированный пользователь может сделать пожертвование.
Зарегистрированный пользователь может просматривать только свои пожертвования, при этом ему выводится только четыре поля:
id
comment
full_amount
create_date
Информация о том, инвестировано пожертвование в какой-то проект или нет, обычному пользователю недоступна.
Суперпользователь может просматривать список всех пожертвований, при этом ему выводятся все поля модели.
Редактировать или удалять пожертвования не может никто.

## Как начать
Клонировать репозиторий и перейти в него в командной строке:

```
git clone git@github.com:DanilTsarev/cat_charity_fund.git
```

```
cd cat_charity_fund
```

Cоздать и активировать виртуальное окружение:

```
python3 -m venv venv
```

* Если у вас Linux/macOS

    ```
    source venv/bin/activate
    ```

* Если у вас windows

    ```
    source venv/scripts/activate
    ```

Установить зависимости из файла requirements.txt:

```
python3 -m pip install --upgrade pip
```

```
pip install -r requirements.txt
```

```
touch .env
```

## Настройка
```
Пример содержания настроек файла

APP_TITLE=Сервис бронирования переговорных комнат
SECRET=User
FIRST_SUPERUSER_EMAIL=Admin@yandex.ru
FIRST_SUPERUSER_PASSWORD=123456
```

## Команда для запуска проекта на локальном сервере:
Из корневой директории
```
uvicorn app.main:app 
```
Или
```
uvicorn app.main:app --reload
```
## Фишечка с суперпользователем
В приложении реализованно создание суперпользователя (SuperUser)
при первом запуске приложения. Заполните созданный вами файл .env и заполните данные
```
FIRST_SUPERUSER_EMAIL
FIRST_SUPERUSER_PASSWORD
```
Под этими данными авторизовывайтесь - поздравляю вы под учетной записью суперпользователя.

## Лицензия
Проект лицензирован под MIT License.

## Контакты
Если у вас возникли вопросы или предложения, свяжитесь со мной:
- Email: drsif@yandex.ru
- GitHub: [DanilTsarev](https://github.com/DanilTsarev)
